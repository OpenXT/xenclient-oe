#! /bin/sh
set -e

# Source sysvinit rcS.d defaults.
. /etc/default/rcS

# Source sysvinit functions library.
. /etc/init.d/functions

# /etc/init.d/openxt-bats-suite: run the OpenXT bats test-suite.

begin "Starting OpenXT bats test-suite..."

for dir in /usr/libexec/{dom0,ndvm,uivm}; do
    if [ -d "${dir}" ]; then
        bats "${dir}" | logger -t 'bats-suite'
    fi
done

success "OpenXT bats test-suite completed."
