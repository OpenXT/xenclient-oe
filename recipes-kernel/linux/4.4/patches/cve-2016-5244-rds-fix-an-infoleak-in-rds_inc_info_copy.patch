From 4116def2337991b39919f3b448326e21c40e0dbb Mon Sep 17 00:00:00 2001
From: Kangjie Lu <kangjielu@gmail.com>
Date: Thu, 2 Jun 2016 04:11:20 -0400
Subject: [PATCH] rds: fix an infoleak in rds_inc_info_copy

The last field "flags" of object "minfo" is not initialized.
Copying this object out may leak kernel stack data.
Assign 0 to it to avoid leak.

Signed-off-by: Kangjie Lu <kjlu@gatech.edu>
Acked-by: Santosh Shilimkar <santosh.shilimkar@oracle.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
---
 net/rds/recv.c | 2 ++
 1 file changed, 2 insertions(+)

Index: linux-4.4.15/net/rds/recv.c
===================================================================
--- linux-4.4.15.orig/net/rds/recv.c	2016-07-11 18:31:24.000000000 +0200
+++ linux-4.4.15/net/rds/recv.c	2016-07-25 18:29:35.169604939 +0200
@@ -545,5 +545,7 @@
 		minfo.fport = inc->i_hdr.h_dport;
 	}
 
+	minfo.flags = 0;
+
 	rds_info_copy(iter, &minfo, sizeof(minfo));
 }
